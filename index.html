<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRUSH AX MODS ‚Äì Ultimate Admin</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
--bg:#050508;--card:rgba(20,20,25,.6);
--accent:#00e5ff;--text:#fff;--muted:#94a3b8;
--border:rgba(255,255,255,.08);
--red:#ff0055;--green:#00ff9d
}
body{margin:0;font-family:Inter;background:var(--bg);color:var(--text)}
header{
position:sticky;top:0;z-index:99;
display:flex;justify-content:space-between;align-items:center;
padding:15px 20px;background:rgba(0,0,0,.35);
backdrop-filter:blur(20px);border-bottom:1px solid var(--border)
}
.brand{font-weight:800;display:flex;gap:10px;align-items:center}
.icon-btn{
width:38px;height:38px;border-radius:12px;
display:flex;align-items:center;justify-content:center;
background:rgba(255,255,255,.05);
border:1px solid var(--border);
color:var(--muted);cursor:pointer
}
.icon-btn.danger{border-color:var(--red);color:var(--red)}
.container{max-width:600px;margin:auto;padding:20px}
.card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:20px;margin-bottom:15px}
.btn{width:100%;padding:14px;border-radius:14px;border:none;font-weight:800;cursor:pointer}
.btn-danger{background:rgba(255,0,85,.15);color:var(--red);border:1px solid var(--red)}
.btn-main{background:var(--accent);color:#000}
input{
width:100%;padding:12px;border-radius:12px;
border:1px solid var(--border);
background:#000;color:#fff;margin-top:10px
}
.modal{
position:fixed;inset:0;background:rgba(0,0,0,.85);
display:flex;align-items:center;justify-content:center;
opacity:0;pointer-events:none;transition:.3s
}
.modal.open{opacity:1;pointer-events:auto}
.modal-box{
background:#111;border-radius:20px;
padding:25px;width:90%;max-width:320px;
border:1px solid var(--border)
}
.toast{
position:fixed;top:20px;left:50%;
transform:translateX(-50%) translateY(-120px);
background:#111;border:1px solid var(--accent);
padding:12px 24px;border-radius:50px;
transition:.4s;z-index:999
}
.toast.show{transform:translateX(-50%) translateY(0)}
</style>
</head>

<body>

<header>
  <div class="brand"><i class="fas fa-cube"></i> CRUSH AX MODS</div>
  <div style="display:flex;gap:10px">
    <div class="icon-btn" onclick="openPinModal()"><i class="fas fa-bomb"></i></div>
  </div>
</header>

<div class="container">

  <div class="card">
    <h3>üîê Change Admin PIN</h3>
    <input id="newPin" type="password" placeholder="New PIN">
    <button class="btn btn-main" onclick="changePin()">UPDATE PIN</button>
  </div>

  <div class="card">
    <h3>üî• Danger Zone</h3>
    <p style="font-size:.85rem;color:var(--muted)">
      Auto-backup ‚Üí PIN verify ‚Üí Full wipe
    </p>
    <button class="btn btn-danger" onclick="openPinModal()">CLEAR ALL DATA</button>
  </div>

</div>

<!-- PIN MODAL -->
<div class="modal" id="pinModal">
  <div class="modal-box">
    <h3>Admin Verification</h3>
    <input type="password" id="pinInput" placeholder="Enter Admin PIN">
    <button class="btn btn-danger" style="margin-top:15px" onclick="verifyPin()">CONFIRM</button>
  </div>
</div>

<div class="toast" id="toast">Done</div>

<script>
const DEFAULT_PIN="7860";
let adminPin=localStorage.getItem("ADMIN_PIN")||DEFAULT_PIN;
let dbUrl=localStorage.getItem("gateway_db_url")||"";
let dbData={ValidKeys:{},ActivatedUsers:{},BannedDevices:{},Config:{},DeleteLogs:{}};

function toast(msg){
 const t=document.getElementById("toast");
 t.innerText=msg;
 t.classList.add("show");
 setTimeout(()=>t.classList.remove("show"),2000)
}
function sanitize(u){return u.endsWith("/")?u+".json":u+"/.json"}

function openPinModal(){
 document.getElementById("pinModal").classList.add("open")
}

function verifyPin(){
 const p=document.getElementById("pinInput").value;
 if(p!==adminPin){toast("‚ùå Wrong PIN");return}
 document.getElementById("pinModal").classList.remove("open")
 wipeAll()
}

async function wipeAll(){
 if(!confirm("FINAL WARNING!\nEverything will be deleted."))return

 const backupKey="_BACKUP_"+new Date().toISOString()
 dbData.DeleteLogs[Date.now()]="FULL WIPE"

 const fullData=JSON.parse(JSON.stringify(dbData))
 await fetch(sanitize(dbUrl.replace(".json","")+"/"+backupKey),{
  method:"PUT",body:JSON.stringify(fullData)
 })

 dbData.ValidKeys={}
 dbData.ActivatedUsers={}
 dbData.BannedDevices={}

 await fetch(sanitize(dbUrl),{method:"PUT",body:JSON.stringify(dbData)})
 toast("üî• SYSTEM CLEANED")
}

function changePin(){
 const p=document.getElementById("newPin").value;
 if(p.length<4){toast("PIN too short");return}
 adminPin=p;
 localStorage.setItem("ADMIN_PIN",p);
 toast("üîê PIN UPDATED")
}
</script>
</body>
</html>